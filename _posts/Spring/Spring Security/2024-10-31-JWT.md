---
title: "JWT(Json Web Token)"
description: "JWT(Json Web Token)"
date: 2024-10-31
categories: [ Spring, Spring Security ]
tags: [ Spring, Spring Security ]
---

## JWT 구현 요약

1. SecurityConfig  
  - formLogin 비활성화 -> UsernamePasswordAuthenticationFilter 필터 비활성화  
  - Session: stateless 설정  
  
2. SecurityConfig 에 JwtFilter, LoginFilter 필터 추가
	- **JwtFilter**
		- 헤더 검증
		- 토큰 만료 검증
		- 검증에 통과되면 매 요청마다 header 내 저장된 토큰 정보를 가지고 세션에 새로 저장한다. 
	- **LoginFilter(UsernamePasswordAuthenticationFilter 구현체)**
		- attemptAuthentication
			- AuthenticationManager를 사용하여 사용자 인증 수행
			- AuthenticationManager는 UserDetailsService를 사용하여 사용자 정보를 로드하고, 비밀번호를 검증
		- successfulAuthentication / unsuccessfulAuthentication
			- successfulAuthentication: jwt 발급 후 헤더에 저장
      
***SecurityContextHolder를 통해 사용자의 인증 상태를 확인되면 UsernamePasswordAuthenticationFilter 구현체가 더이상 호출되지 않는다.***
		
3. CORS
  - SecurityConfig 내, WebMvcConfigurer 구현체에 코드 추가 필요