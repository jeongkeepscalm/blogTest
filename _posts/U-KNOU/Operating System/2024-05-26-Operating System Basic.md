---
title: "[U-KNOU] Operating System Basic"
description: "[U-KNOU] Operating System Basic"
date: 2024-05-26
categories: [ U-KNOU, Operating System ]
tags: [ U-KNOU, Operating System ]
---

## 운영체제란?

- 대표적인 시스템 소프트웨어  
- 컴퓨터 시스템의 자원을 관리하고 프로그램 동작을 위한 서비스를 제공하는 프로그램들의 모음  

## 운영체제의 역할

1. 컴퓨터 시스템의 자원 관리  
  - 저장장치에서 데이터 읽어오기  
  - CPU와 메모리를 효율적으로 관리  
2. 사용자 지원  
  - 사용자가 내린 명령을 해석 후 실행
  - 편의성 제공  

<br/>
<hr>

```운영체제가 없던 초기 컴퓨터 시스템```  
응용프로그램이 하드웨어를 직접 제어  
응용프로그램 개발자는 하드웨어 제어 방법을 잘 알아야 했음  
```운영체제가 있는 컴퓨터 시스템```  
**하드웨어와 응용프로그램의 매개체**  
**운영체제가 컴퓨터 시스템의 자원 제어**  
  
```커널모드(슈퍼바이저 모드)```: 하드웨어를 직접 제어할 수 있는 CPU 명령어를 사용할 수 있는 모드  
```사용자모드(보호 모드)```: CPU 명령어를 사용할 수 없고 응용프로그램이 동작하는 모드  
  
```커널(Kernel)```  
커널 모드에서 동작하는 운영체제의 핵심 요소  
응용프로그램과 하드웨어 수준의 처리사이의 가교 역할  
  
```일체형커널```( 커널 == 운영체제 )  
운영체제의 모든 서비스가 커널 내 포함  
커널 내부 요소들의 효율적으로 상호작용  
한 요소라도 오류가 발생하면 시스템 전체에서 장애 발생 가능 ( UNIX, Linux.. )  
-```마이크로커널```   
커널 안에는 가장 핵심적인 요소들만 있다. ( 메모리 관리, 멀티태스킹, 프로세스 간 통신(IPC) 등.. )  
새로운 서비스를 추가하여 운영체제를 확장하기 쉽다.  
유지보수가 용이하여 안정성이 우수하다.   
커널 외부 요소들 사이는 IPC가 필요하여 성능저하가 발생한다.  
  
```시스템 호출```  
응용프로그램이 하드웨어에 대한 제어가 필요할 때 이용한다.  
운영체제에 서비스를 요청하는 메커니즘  

<br/>
<hr>

## 운영체제 구성

```프로세스 관리자```  
프로세스의 생성 및 삭제  
CPU 할당을 위한 스케줄 결정  
메모리에 올라와있는 프로그램의 순서를 스케줄링이 결정  
프로세스의 상태를 관리하며 상태 전이 처리  
```메모리 관리자```  
메모리 공간을 보호  
차지하고 있는 메모리와 겹치지 않게 메모리 공간을 부여해서 할당 및 회수  
```장치 관리자```  
컴퓨터 시스템의 모든 장치에 할당, 작동, 반환해준다. ( 하드 디스크, SSD, 키보드, 마우스, 프린터 등.. )  
```파일 관리자```  
저장장치의 공간 관리  
파일의 접근 제한 관리  

<br/>
<hr>

## 운영체제의 유형

```일괄처리 운영체제(Batch Processing)```  
작업을 모아서 순서대로 처리하는 방식  
전체적인 작업 처리 속도가 향상됨  
나중에 들어온 중요도 높은 작업은 우선순위에 밀려 기다리게 된다.  
```시분할 운영체제(Time Sharing)```  
각 프로그램을 한 번에 조금씩 수행하는 방식  
응답시간이 일괄처리 운영체제보다 크게 단축된다.  
```실시간 운영체제(Real-Time)(RTOS)```  
원하는 시간 내에 프로그램 결과를 얻을 수 있는 방식  
최종적인 결과물을 받는 시간이 빠름  
처리결과가 현재의 결정에 영향을 주는 환경에서 사용(미사일 제어 시스템, 증권 거래 관리 시스템 등..)  
```분산 운영체제```
분산 시스템을 관리하기 위한 운영체제  
분산 시스템: 2개 이상의 컴퓨터 시스템이 네트워크로 서로 연결되어 서로의 자원을 이용하는 시스템  
다른 컴퓨터 시스템의 자원을 이용하는 것이 마치 자신 컴퓨터 시스템에 있는 자원을 이용하는 것처럼 가능하게 한다.  

<br/>
<hr>

## 프로세스란?

- 실행중인 프로그램   
- 동작을 하는 능동적 개체   
- 운영체제로부터 자원을 할당 받아 동작   

### 운영체제(프로세스 관리자)가 처리하는 작업

- 프로세스를 생성 및 종료  
- 프로세스를 실행시키기 위한 스케줄링 작업  
- 프로세스의 상태 관리  
  
<img src="/assets/img/os.jpg" width="600px">  
  
```프로세스 제어 블록(PCB: Process Control Block)```: 운영체제가 프로세스를 관리하기 필요한 정보를 가지고 있다.  
- 프로세스번호(PID)  
- 프로세스 상태  
- 프로그램 카운터(PC): 다음에 어떤 처리를 해야 하는지 알 수 있다. 제어의 흐름을 볼 수 있다.    
- 레지스터: 여러 프로세스가 번갈아 실행되는 경우 레지스터에 저장되어 있던 값을 활용한다.  
- 메모리 관리 정보  
- 프로세스 우선순위  
- 회계 정보 ...  

## 프로세스 상태 

<img src="/assets/img/processState.jpg" width="600px">  
  
```디스패치```: 프로세스를 CPU에 할당하는 과정  
  
**프로세스 생성과정**  
- 사용자가 직접 프로그램 실행  
- 한 프로세스가 다른 프로세스를 생성(부모프로세스가 자식프로세스 생성): 프로세스 생성 시스템 호출 이용  
  
**프로세스 종료 방법**  
- 프로세스가 모든 처리를 완료할 때( 정상적 종료 )  
- 부모프로세스가 자식프로세스를 강제 종료할 수 있다.      
- 자식의 PID를 이용해서 프로세스 종료 시스템 호출한다.  

<br/>
<hr>

## 쓰레드란?

- 프로세스 내에 다중처리를 위해 제안된 개념  
- 디스패칭의 단위
- 하나의 프로세스에는 하나 이상의 쓰레드가 존재한다.  
- 전통적인 프로세스와는 다르게 쓰레드가 PC(program counter)를 가지고 있다.  
- 실행에 필요한 최소한의 정보만 가진다.  
    - PC를 포함한 레지스터 값  
    - 상태정보  
    - 스택 영역  
    - 나머지 정보는 프로세스에 두고 다른 쓰레드와 공유  
  
<img src="/assets/img/processInner.jpg" width="600px">  

<br/>
<hr>

## 스케줄링

```스케줄링```: 여러가지 작업의 처리 순서를 결정  
  
- 프로세스 스케줄링
- 디스크 스케줄링  
  
**스케줄링의 기본 목표**   
공정성: 모든 프로세스가 적정 수준에서 CPU 작업을 할 수 있게 함.  
균형: 시스템 자원이 충분히 활용될 수 있게 함.  
  
**운영체제 유형에 따른 스케줄링의 목표**  
일괄처리 운영체제: 처리량 극대화, 반환시간(프로세스 생성~종료) 최소화, CPU활용 극대화.  
시분할 운영체제: 빠른 응답시간, 과다한 대기시간 방지.  
실시간 운영체제: 처리기간 맞춤.  
  
**선점 스케줄링 정책(preemptive)**
- 높은 우선순위의 프로세스를 바로 처리할 수 있다. (실시간 시스템, 시분할 시스템)  
- 문맥교환에 따른 오버헤드가 발생  
- ```문맥(context)```: CPU의 모든 레지스터와 기타 운영체제에 따라 요구되는 프로세스 상태  
- ```문맥교환(context switching)```: 현재 프로세스의 문맥을 PCB에 저장하고 다른 프로세스의 PCB를 읽어 문맥을 복원하는 작업이다.  
- ```오버헤드```: 추가적으로 시간, 메모리, 자원이 사용되는 현상   
  
**비선점 스케줄링 정책(nonpreemptive)**  
- 실행 중인 프로세스를 바로 준비 상태로 문맥교환을 할 수 없다. ( 실행 -> 종료 / 실행 -> 대기 (o) )  
- 강제적인 문맥교환이 없기에 오버헤드가 없다.   

## 스케줄링 알고리즘

**FCFS(First-Come First-Served)**  
- 비선점 방식
- 준비 큐에 도착한 순서에 따라 디스패치.  
- 프로세스의 도착 순서에 따라 반환시간이 크게 변한다.  
  
**SJF(Shortest Job First)**   
- 비선점 방식  
- 준비 큐 내 프로세스 중 가장 짧은 실행시간으로 예상되는 프로세스를 먼저 디스패치한다.  
- 일괄처리 환경에서 구현하기 쉽다.  
  
**SRT(Shortest Remaining Time)**  
- 선점방식  
- SJF보다 평균대기시간이나 평균반환시간에 효율적  
  
**RR(Round Robin)**  
- 선점방식  
- FCFS처럼 먼저 도착한 순서대로 디스패치 하지만, 정해진 시간할당량이 주어지고 시간할당량 내 종료하지 못한 프로세스는 준비큐의 마지막에 배치된다.  
- CPU를 독점하지 않고 공평하게 이용한다.(시분할 운영체제에 적합)  
- 시간 할당량이 너무 크면, FCFS와 다를 바 없다.  
  
**HRN(Highest Response Ratio Next)**  
- 비선점방식  
- 준비큐에서 기다리는 프로세스 중 응답비율이 가장 큰 것을 먼저 디스패치한다.  
  
**다단계 피드백 큐 스케줄링**  
- 선점 방식  
- I/O 중심 프로세스와 연산 중심 프로세스의 특성에 따라 **서로 다른 시간 할당량 부여**  
- 1 ~ n 단계까지 준비큐 존재  
- 1단계 준비큐에 프로세스가 다 실행되고 종료되지 못한 프로세스들은 2단계 준비큐로 넘어가게 되고 ... n단계 준비큐까지 이어진다.  
- 단계가 커질수록 시간 할당량도 커진다.  
- I/O 중심 프로세스에 높은 우선권이 유지된다.  
- 연산 중심 프로세스는 낮은 우선권을 갖지만 긴 시간 할당량을 갖는다.  
  
<img src="/assets/img/sun.jpg" width="600px">  

<br/>
<hr>

## 병행 프로세스

병행성: 여러 프로세스/쓰레드가 동시에 수행되는 시스템 특성  
  
- CPU가 1개 일 경우(인터리빙 형식)  
  여러 프로세스가 실행될 수는 있지만 CPU에서의 처리는 한 프로세스만 처리하고 있다. (RR스케줄링과 비슷하게 처리)  
- CPU가 여러 개일 경우(병렬처리 형식)  
  CPU의 개수만큼 프로세스 동시에 처리 가능하다.  
  => 즉, 하나의 CPU는 하나의 프로세스만 처리할 수 있다.  
  
- 강결합 시스템  
  여러 CPU들이 하나의 메모리를 공유한다.(공유 메모리 구조)  
- 약결합 시스템  
  CPU 마다 메모리가 별도로 존재한다.(분산 메모리 구조)  
  CPU끼리 정보를 주고 받을 때, 통신선을 통한다.  
  
- 독립 프로세스  
  각각의 프로세스가 자신의 일만 한다. 다른 프로세스에 영향을 주고 받지 않는다.  
  데이터 및 상태를 다른 프로세스들과 공유하지 않는다.  
  결정적. **실행 결과는 입력에 의해서 결정**된다.  
  재생가능. 같은 입력에 대하여 항상 같은 실행결과를 리턴한다.  
- 협력 프로세스  
  수행중인 다른 프로세스와 영향을 주고 받는다.  
  데이터 및 상태를 다른프로세스들과 공유한다.  
  비결정적. 실행결과는 실행순서에 좌우된다.  
  재생불가능. 같은 입력에 대하여 항상 같은 실행결과를 보장할 수 없다.  
  
- 협력 프로세스일 경우 생기는 문제  
  1. 상호배제 필요
    2개 이상의 프로세스가 동시에 **임계영역을 수행하지 못하도록** 해야한다.  
    `임계영역`: 두 개 이상의 프로세스가 동시에 공유 자원에 접근을 허용하는 프로그램 코드 영역  
